<div [@routerTransition]>
    <app-page-header [heading]="'Manage Report'" [icon]="'fa-line-chart'"></app-page-header>
    <ngx-loading [show]="loading" [config]="{fullScreenBackdrop: true}"></ngx-loading>     
    <div class="col-sm-12 col-md-10 col-centered">
        <div class="card mb-3">
            <div class="card-header">Report List</div>
            <div class="card-body">
                <div class="row" [style.padding-bottom]="'15px'">
                    <div class="col col-lg-12">
                        <button type="button" class="btn btn-outline-primary" [style.float]="'right'"
                            [routerLink]="['/generateDailyReport']" [routerLinkActive]="['router-link-active']" >
                            <i class="fa fa-plus"></i>  Generate Daily Report
                        </button>
                    </div>
                </div>
                <div class="row" [style.padding-bottom]="'15px'">
                    <div class="col col-lg-12">
                        <mat-form-field>
                            <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter report list">
                        </mat-form-field>
                    </div>
                </div>
                        
                <div class="row">
                    <div class="col col-lg-12">
                        <div class="mat-elevation-z8 tbl-manage-report">

                            <mat-table [dataSource]="dataSource" matSort>

                                <!-- ID Column -->
                                <ng-container matColumnDef="daily_report_id">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header> ID </mat-header-cell>
                                    <mat-cell *matCellDef="let row"> {{row.daily_report_id}} </mat-cell>
                                </ng-container>

                                <!-- Progress Column -->
                                <ng-container matColumnDef="created_by">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header> Created By </mat-header-cell>
                                    <mat-cell *matCellDef="let row"> {{row.created_by}} </mat-cell>
                                </ng-container>

                                <!-- Color Column [style.color]="row.color"-->
                                <ng-container matColumnDef="created_date">
                                    <mat-header-cell *matHeaderCellDef mat-sort-header> Created Date </mat-header-cell>
                                    <mat-cell *matCellDef="let row"> {{general.toDateDisplayFormat(row.created_date)}} </mat-cell>
                                </ng-container>

                                <ng-container matColumnDef="action">
                                    <mat-header-cell *matHeaderCellDef> Action </mat-header-cell>
                                    <mat-cell *matCellDef="let row">
                                        <button type="button" class="btn-action mr-3" aria-label="Close" (click)="deleteReport(row)"
                                            ngbTooltip="Delete Report">
                                            <i class="fa fa-trash-o fa-3"></i>
                                        </button>
                                        <button type="button" class="btn-action" aria-label="Close" (click)="downloadReport(row)"
                                            ngbTooltip="Download Report">
                                            <i class="fa fa-download fa-3"></i>
                                        </button>
                                    </mat-cell>
                                </ng-container>

                                <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                                <mat-row *matRowDef="let row; columns: displayedColumns;">
                                    <!-- (click)="viewAssignment(row.assignment_id)"> -->
                                </mat-row>
                            </mat-table>

                            <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>