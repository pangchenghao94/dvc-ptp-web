<div [@routerTransition]>    
    <ngx-loading [show]="loading" [config]="{fullScreenBackdrop: true}"></ngx-loading>
    <app-page-header [heading]="'View Inspection & Destruction'" [icon]="'fa-file'"></app-page-header>
    <div class="col-sm-12 col-centered">
        <div class="card mb-3">
            <div class="card-header">
                <div>View Inspection & Destruction</div>
            </div>

            <div class="card-body">

                <div class="row">
                    <div class="col-lg-12 d-flex">
                        <div class="ml-auto row">
                            ID: 
                            <span class="text-secondary pl-3 pr-4">{{ ind.ind_id }}</span>

                            Created by: 
                            <span class="text-secondary pl-3 pr-4">{{ ind.created_by }}</span>
        
                            Date: 
                            <span class="text-secondary pl-3 pr-3">{{ ind.issue_date }}</span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-12 col-xl-6 pt-5 text-wrap">
                        <div class="row">
                            <div class="col-lg-12">
                                <h5><strong>Premise Details</strong></h5>
                            </div>
                        </div>

                        <div class="row pt-2">
                            <div class="col-lg-12 col-xl-6 d-flex align-items-center" *ngIf="!ind.area_inspection">
                                <input type="checkbox" disabled="disabled" [checked]="ind.p_close">
                                <span class="pl-3"> Premise Close</span>
                            </div>
                            <div class="col-lg-12 col-xl-6 d-flex align-items-center" *ngIf="!ind.area_inspection">
                                <input type="checkbox" disabled="disabled" [checked]="ind.p_empty">
                                <span class="pl-3"> Premise Empty</span>
                            </div>
                            <div class="col-lg-12 d-flex align-items-center" *ngIf="!ind.area_inspection">
                                <input type="checkbox" disabled="disabled" [checked]="ind.p_cooperation">
                                <span class="pl-3"> Cooperation</span>
                            </div>
                            <div class="col-lg-12 d-flex align-items-center" *ngIf="ind.area_inspection">
                                <input type="checkbox" disabled="disabled" [checked]="ind.area_inspection">
                                <span class="pl-3"> Area Inspection</span>
                            </div>
                        </div>

                        <div class="row pt-4">
                            <div class="col-lg-4">
                                {{ ind.area_inspection ? 'Area Name' : 'Full Name'}}
                            </div>
                            <div class="col-lg-8">
                                <span class="text-secondary">{{ ind.po_name == '' ? '-' : ind.po_name }}</span>
                            </div>
                        </div>

                        <div class="row pt-2" *ngIf="!ind.area_inspection">
                            <div class="col-lg-4">
                                IC. Number
                            </div>
                            <div class="col-lg-8">
                                <span class="text-secondary">{{ ind.po_id == '' ? '-' : ind.po_id }}</span>
                            </div>
                        </div>

                        <div class="row pt-2">
                            <div class="col-lg-4">
                                Address
                            </div>
                            <div class="col-lg-8">
                                <span class="text-secondary">{{ ind.p_shortAddr }}</span>
                            </div>
                        </div>

                        <div class="row pt-2" *ngIf="!ind.area_inspection">
                            <div class="col-lg-4">
                                No. of family members
                            </div>
                            <div class="col-lg-8">
                                <span class="text-secondary">{{ ind.no_familyMember }}</span>
                            </div>
                        </div>
                        <div class="row pt-2" *ngIf="!ind.area_inspection">
                            <div class="col-lg-4">
                                No. of fever members
                            </div>
                            <div class="col-lg-8">
                                <span class="text-secondary">{{ ind.no_fever }}</span>
                            </div>
                        </div>

                        <div class="row pt-5">
                            <div class="col-lg-12">
                                <h5>
                                    <strong>Aedes Mosquitoes Larvae Breeding Finding</strong>
                                </h5>
                            </div>
                        </div>

                        <div class="row pt-2">
                            <div class="col-lg-4">
                                Container Type
                            </div>
                            <div class="col-lg-8">
                                <span class="text-secondary">{{ ind.container_type == '' ? '-' : ind.container_type }}</span>
                            </div>
                        </div>
                        
                        <div class="row pt-2">
                            <div class="col-lg-4">
                                Destroyed Breeding Area
                            </div>
                            <div class="col-lg-8">
                                <span class="text-secondary">{{ ind.act_destroy }}</span>
                            </div>
                        </div>

                        <div class="row pt-2">
                            <div class="col-lg-4">
                                Outside
                            </div>
                            <div class="col-lg-8">
                                <span class="text-secondary">{{ ind.no_out_breeding }}</span>
                            </div>
                        </div>
                        <div class="row pt-2">
                            <div class="col-lg-4">
                                Inside
                            </div>
                            <div class="col-lg-8">
                                <span class="text-secondary">{{ ind.no_in_breeding }}</span>
                            </div>
                        </div>

                    </div>
                    <div class="col-lg-12 col-xl-6 pt-5">
                        <div class="row">
                            <div class="col-lg-12">
                                <h5>
                                    <strong>Potential Aedes Mosquitoes Larvae Breeding Finding</strong>
                                </h5>
                            </div>
                        </div>
                        
                        <div class="row pt-2">
                            <div class="col-lg-4">
                                Outside
                            </div>
                            <div class="col-lg-8">
                                <span class="text-secondary">{{ ind.no_pot_out_breeding }}</span>
                            </div>
                        </div>

                        <div class="row pt-2">                        
                            <div class="col-lg-4">
                                Inside
                            </div>
                            <div class="col-lg-8">
                                <span class="text-secondary">{{ ind.no_pot_in_breeding }}</span>
                            </div>
                        </div>

                        <div class="row pt-2">                        
                            <div class="col-lg-4">
                                Abating
                            </div>
                            <div class="col-lg-8">
                                <span class="text-secondary">{{ ind.abating_amount }} {{ ind.abating_measure_type == '0' ? 'gram' : 'ml' }}</span>
                            </div>
                        </div>

                        <div class="row pt-5">
                            <div class="col-lg-12">
                                <h5>
                                    <strong>Actions</strong>
                                </h5>
                            </div>
                        </div>

                        <div class="row pt-2 pb-5">
                            <div class="col-lg-12 d-flex align-items-center">
                                <input type="checkbox" disabled="disabled" [checked]="ind.act_education">
                                <span class="pl-3"> Education</span>
                            </div>
                            <div class="col-lg-12 d-flex align-items-center">
                                <input type="checkbox" disabled="disabled" [checked]="ind.act_pamphlet">
                                <span class="pl-3"> Pamphlet</span>
                            </div>
                        </div>

                        <div class="row mt-2">
                            <div class="ml-3">
                                <button type="button" [class]="exhibitData ? 'btn btn-primary' : 'btn btn-outline-primary'" [disabled]="!exhibitData" (click)="openExhibitModal(modalExhibit)">
                                    <i class="fa fa-pencil"></i> Exhibit
                                </button>
                            </div>
                            <div class="ml-3">
                                <button type="button" [class]="sek5Data ? 'btn btn-primary' : 'btn btn-outline-primary'" [disabled]="!sek5Data" (click)="openModal(modalSek5, null)">
                                    <i class="fa fa-pencil"></i> Seksyen 5
                                </button>
                            </div>
                            <div class="ml-3">
                                <button type="button" [class]="sek8Data ? 'btn btn-primary' : 'btn btn-outline-primary'" [disabled]="!sek8Data" (click)="openModal(modalSek8, 'lg')">
                                    <i class="fa fa-pencil"></i> Seksyen 8
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card-footer">
                <button type="button" class="btn btn-outline-primary mr-3" (click)="editBtn()">
                    <i class="fa fa-pencil"></i> Edit I&D
                </button>
                <button type="button" class="btn btn-outline-danger mr-3" (click)="deleteBtn()">
                    <i class="fa fa-pencil"></i> Delete I&D
                </button>
                <button class="btn btn-outline-secondary"
                    [routerLink]="['/manageIND']" [routerLinkActive]="['router-link-active']">
                    Cancel
                </button>
            </div>
        </div>
    </div>
</div>

<ng-template #modalExhibit let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title">
            View Exhibit
        </h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">

        <div class="row pt-2">
            <div class="col-lg-12">
                <h5><strong>Premise Owner Details</strong></h5>
            </div>
        </div>

        <div class="row pt-2">
            <div class="col-lg-12 d-flex align-items-center">
                <input type="checkbox" value="" disabled="disabled" [checked]="exhibitData.exhibit.acceptance == '1'">
                <span class="pl-3"> Premise Owner Cooperation</span>
            </div>
        </div>

        <div class="row pt-2">
            <div class="col-lg-4">
                Full Name:
            </div>
            <div class="col-lg-8">
                <span class="text-secondary">{{ exhibitData.exhibit.po_full_name == '' ? '-' : exhibitData.exhibit.po_full_name }}</span>
            </div>
        </div>

        <div class="row pt-2">
            <div class="col-lg-4">
                IC. Number:
            </div>
            <div class="col-lg-8">
                <span class="text-secondary">{{ exhibitData.exhibit.po_ic_no == '' ? '-' : exhibitData.exhibit.po_ic_no }}</span>
            </div>
        </div>

        <div class="row pt-4">
            <div class="col-lg-12">
                <h5><strong>Breeding Location Drawings</strong></h5>
            </div>
        </div>

        <div class="row pb-4">
            <div class="col col-lg-12 pt-2">
                <button type="button" class="btn btn-outline-primary" (click)="openFPModal(modalFloorPlan, 'lg')">
                    <i class="fa fa-pencil"></i> Floor Plan
                </button>
                <button type="button" class="btn btn-outline-danger ml-3" (click)="openPLModal(modalPremiseLocation, 'lg')">
                    <i class="fa fa-pencil"></i> Premise Location
                </button>
            </div>
        </div>

        <div class="col-sm-12 mt-3 pl-0 pr-0" *ngFor="let item of exhibitData.exhibitItems">
            <div class="card bg-light mb-3">
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-8 align-self-center">
                            <div class="row">
                                <div class="col-sm-3">
                                    Code
                                </div>
                                <div class="col-sm-9">
                                    <span class="text-secondary">{{ item.code }}</span>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-3">
                                    Type
                                </div>
                                <div class="col-sm-9">
                                    <span class="text-secondary">{{ item.type }}</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4 d-flex justify-content-around">
                            <img class="img-thumbnail img-exhibitItem" 
                                style="width: 100px; height: 100px;"
                                (click)="openExhibitItemModal(modalExhibitItem, item.fileName)"
                                [src]="item.fileName" alt="">                
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #modalSek8 let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title">
            View Seksyen 8
        </h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="row pt-2">
            <div class="col-lg-12">
                <div class="alert alert-info">
                    PERINTAH BERKENAAN AKTA PEMUSNAHAN SERANGGA PEMBAWA PENYAKIT 1975 (PINDAAN) 2000
                </div>
            </div>
        </div>
        <div class="row pt-3">
            <div class="col-lg-12">
                <strong class="pr-2">Date Until:</strong>
                {{ this.general.toDateDisplayFormat(sek8Data.checking_date) }}
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="mr-0 ml-3 d-flex justify-content-center align-items-center">
                <input type="checkbox" value="" disabled="disabled" [checked]="sek8Data.chkbx1 == '1'">
            </div>
            <div class="col">
                <span>Pungut dan buang bekas-bekas yang atau boleh mengandungi air agaar ia tidak akan mengandungi air.</span>                
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="mr-0 ml-3 d-flex justify-content-center align-items-center">
                <input type="checkbox" value="" disabled="disabled" [checked]="sek8Data.chkbx2 == '1'">
            </div>
            <div class="col">
                <span>Tutup semua bekas simpanan air dengan rapat dan gosok dan bersihkan sebelum mengisi air yang baharu sekurang-kurangnya seminggu sekali.</span>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="mr-0 ml-3 d-flex justify-content-center align-items-center">
                <input type="checkbox" value="" disabled="disabled" [checked]="sek8Data.chkbx3 == '1'">
            </div>
            <div class="col">
                <span>Jangan buang dan bersihkan bekas-bekas air yang telah dicampurkan dengan ubat kimia oleh Jabatan Kesihatan.</span>
            </div>
        </div>
        
        <hr>

        <div class="row">
            <div class="mr-0 ml-3 d-flex justify-content-center align-items-center">
                <input type="checkbox" value="" disabled="disabled" [checked]="sek8Data.chkbx4 == '1'">
            </div>
            <div class="col">
                <span>Campurkan satu sudu besar garam ke dalam perangkap-perangkap semut setiap kali airnya diganti.</span>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col">
                <span>Elakkan air bertakung di lubang pokok, tunggul-tunggul buluh dan pokok-pokok yang boleh mengandungi air seperti pokok pisang,
                        pokok bunga dalam pasu dan lain-lain dengan</span>
            </div>
        </div>
        <div class="row pt-2">
            <div class="mr-0 ml-3 d-flex justify-content-center align-items-center">
                <input type="checkbox" value="" disabled="disabled" [checked]="sek8Data.chkbx5 == '1'">
            </div>
            <div class="col">
                <span>memusnahkan dan melupuskan</span>
            </div>
        </div>
        <div class="row pt-2">
            <div class="mr-0 ml-3 d-flex justify-content-center align-items-center">
                <input type="checkbox" value="" disabled="disabled" [checked]="sek8Data.chkbx6 == '1'">
            </div>
            <div class="col">
                <span>menyalur air darinya</span>
            </div>
        </div>
        <div class="row pt-2">
            <div class="mr-0 ml-3 d-flex justify-content-center align-items-center">
                <input type="checkbox" value="" disabled="disabled" [checked]="sek8Data.chkbx7 == '1'">
            </div>
            <div class="col">
                <span>mengisikan dengan simen / pasir</span>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="mr-0 ml-3 d-flex justify-content-center align-items-center">
                <input type="checkbox" value="" disabled="disabled" [checked]="sek8Data.chkbx8 == '1'">
            </div>
            <div class="col">
                <span>Elakkan bahagian-bahagian jentera, besi-besi buruk, pembancuh simen, perkakas jamban, kenderaan rosak dan lain-lain perkakas dari menakung air.</span>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="mr-0 ml-3 d-flex justify-content-center align-items-center">
                <input type="checkbox" value="" disabled="disabled" [checked]="sek8Data.chkbx9 == '1'">
            </div>
            <div class="col">
                <span>Bersihkan tepi-tepi kolam dari rumput-rumpai dan pertumbuhan di bawahnya dan tepi-tepinya mestilah sentiasa bersih dari sebarang tumbuh-tumbuhan.</span>
            </div>
        </div>
        
        <hr>

        <div class="row">
            <div class="mr-0 ml-3 d-flex justify-content-center align-items-center">
                <input type="checkbox" value="" disabled="disabled" [checked]="sek8Data.chkbx10 == '1'">
            </div>
            <div class="col">
                <span>Buang semua tumbuh-tumbuhan dan lain-lain benda yang terapung dari kolam-kolan.</span>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="mr-0 ml-3 d-flex justify-content-center align-items-center">
                <input type="checkbox" value="" disabled="disabled" [checked]="sek8Data.chkbx11 == '1'">
            </div>
            <div class="col">
                <span>Timbus / ratakan lubang-lubang dalam tanah.</span>
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="mr-0 ml-3 d-flex justify-content-center align-items-center">
                <input type="checkbox" value="" disabled="disabled" [checked]="sek8Data.chkbx12 == '1'">
            </div>
            <div class="col">
                <span>Membubuh ubat jentik-jentik dalam telaga / kolam / lembah supaya menghalang serangga pembawa penyakit dari membiak.</span>
            </div>
        </div>

        <hr>
        
        <div class="row">
            <div class="mr-0 ml-3 d-flex justify-content-center align-items-center">
                <input type="checkbox" value="" disabled="disabled" [checked]="sek8Data.chkbx13 == '1'">
            </div>
            <div class="col">
                <span>Potong dan buang segala tumbuh-tumbuhan dan pungut dan buang semua sampah-sarapnya supaya premis bersih dan kemas.</span>
            </div>
        </div>

        <hr>

        <div class="row pt-2 pb-3">
            <div class="col-lg-2">
                <strong>Remark:</strong>
            </div>
            <div class="col-lg-10">
                {{ sek8Data.remark }}
            </div>
        </div>
    
    </div>
</ng-template>

<ng-template #modalSek5 let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title">
            View Seksyen 5
        </h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="row pt-2">
            <div class="col-lg-12">
                <div class="alert alert-info">
                    NOTIS UNTUK MEMASUKI PREMISE BAGI PEMERIKSAAN DAN MENJALANKAN KUASA-KUASA DI BAWAH SEKSYEN 5 AKTA PEMUSNAHAN SERANGGA PEMBAWA PENYAKIT (PINDAAN) 2000
                </div>
            </div>
        </div>

        <div class="row pt-2">
            <div class="col-lg-12">
                <h5><strong>Appointment Date Time from</strong></h5>
            </div>
        </div>
        <div class="row pt-2">
            <div class="col-lg-4">
                Date:
            </div>
            <div class="col-lg-8">
                <span class="text-secondary">{{ this.general.toDateDisplayFormat(sek5Data.date) }}</span>
            </div>
        </div>
        <div class="row pt-2">
            <div class="col-lg-4">
                Time:
            </div>
            <div class="col-lg-8">
                <span class="text-secondary">{{ sek5Data.time }}</span>
            </div>
        </div>
        <div class="row pt-2 pb-3 text-wrap">
            <div class="col-lg-4">
                Remark:
            </div>
            <div class="col-lg-8">
                <span class="text-secondary">{{ sek5Data.remark }}</span>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #modalFloorPlan let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title">
            Floor Plan
        </h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="row">
            <img #floorPlanIMG class="img-thumbnail m-auto" [src]="exhibitData.exhibit.floor_plan_URI" alt="">                
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-primary" (click)="downloadDrawing(floorPlanIMG)">
            <i class="fa fa-donwload"></i> Download
        </button>
    </div>
</ng-template>

<ng-template #modalPremiseLocation let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title">
            Premise Location
        </h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="row">
            <img #premiseLocationIMG class="img-thumbnail m-auto" [src]="exhibitData.exhibit.premise_location_URI" alt="">           
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-primary" (click)="downloadDrawing(premiseLocationIMG)">
            <i class="fa fa-download"></i> Download
        </button>
    </div>
</ng-template>

<ng-template #modalExhibitItem let-c="close" let-d="dismiss">
    <div class="modal-header">
        <h4 class="modal-title">
            Exhibit Item Photo
        </h4>
        <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="row">
            <img #exhibitItemIMG 
                class="img-thumbnail m-auto modal-img-exhibitItem" 
                [src]="temp_exhibitItem_URI" alt="">                
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-primary" (click)="downloadDrawing(exhibitItemIMG)">
            <i class="fa fa-donwload"></i> Download
        </button>
    </div>
</ng-template>